# ------------------------------------------------------------------------------------------->
# dim_name_definitionsr 
# Description. 
#  Define the dimension names and labels used for the HDF5Array s used to store the population figures 
#  This is part ofthe refactoring effort for building the population arrays. 
# 
#  Recreated on January 20, 2026
#  By: Russ Jones
# ------------------------------------------------------------------------------------------->

# Local helpers----

trim_chr <- function(x) {
  x <- as.character(x)
  x <- gsub("^\\s+|\\s+$", "", x)
  x
}

drop_na_chr <- function(x) {
  x <- x[!is.na(x)]
  x
}


# Array name and label definitions  --------------------------------------------------------------------------------
array_definitions <-
  list(
    ## Census estimates ----
    census.estimates = list(
    year = c("2010", "2011", "2012","2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020",
             "2021", "2022", "2023", "2024"),
    sex = c("All", "Female", "Male"),
    age.char = c("0-4", "5-9", "10-14", "15-19", "20-24", "25-29",
                 "30-34", "35-39", "40-44", "45-49", "50-54", "55-59", "60-64",
                 "65-69", "70-74", "75-79", "80-84", "All", "85 +"),
    race = c("All",
             "Asian", "Asian or in combination", "Black", "Black or in combination",
             "American Indian and Alaska Native", "American Indian and Alaska Native or in combination",
             "Hawaiian or Pacific Islander", "Hawaiian or Pacific Islander or in combination",
             "Two or more", "White", "White or in combination"),
    ethnicity = c("All",
                  "Hispanic", "Non-Hispanic")),
    ## Decennial Census ----
    census = list(
      year = c("2000", "2010", "2020"),
      sex = c("All", "Female", "Male"),
      age.char = c("< 1", "1", "10", "100-104", "105-109", "11",
                   "110 +", "12", "13", "14", "15", "16", "17", "18", "19", "2",
                   "20", "21", "22", "23", "24", "25", "26", "27", "28", "29", "3",
                   "30", "31", "32", "33", "34", "35", "36", "37", "38", "39", "4",
                   "40", "41", "42", "43", "44", "45", "46", "47", "48", "49", "5",
                   "50", "51", "52", "53", "54", "55", "56", "57", "58", "59", "6",
                   "60", "61", "62", "63", "64", "65", "66", "67", "68", "69", "7",
                   "70", "71", "72", "73", "74", "75", "76", "77", "78", "79", "8",
                   "80", "81", "82", "83", "84", "85", "86", "87", "88", "89", "9",
                   "90", "91", "92", "93", "94", "95", "96", "97", "98", "99", "All"),
      race = c("All", "American Indian And Alaska Native", "Asian",
               "Black", "Hawaiian Or Pacific Islander", "Other", "Two Or More","White"),
      ethnicity = c("All", "Hispanic", "Non-Hispanic")),
    ## Census Bureau ZCTA estimates ------
    census.zcta.estimates = list(
      end.year = c("2011", "2012",
                   "2013", "2014", "2015", "2016", "2017", "2018", "2019", "2020",
                   "2021", "2022", "2023"),
      zip.code = c("75019", "75022", "75028",
                   "75038", "75050", "75051", "75052", "75054", "75061", "75062",
                   "75063", "75067", "75104", "75261", "76001", "76002", "76005",
                   "76006", "76008", "76009", "76010", "76011", "76012", "76013",
                   "76014", "76015", "76016", "76017", "76018", "76020", "76021",
                   "76022", "76023", "76028", "76034", "76035", "76036", "76039",
                   "76040", "76044", "76051", "76052", "76053", "76054", "76058",
                   "76060", "76063", "76065", "76071", "76084", "76092", "76102",
                   "76103", "76104", "76105", "76106", "76107", "76108", "76109",
                   "76110", "76111", "76112", "76114", "76115", "76116", "76117",
                   "76118", "76119", "76120", "76123", "76126", "76127", "76129",
                   "76131", "76132", "76133", "76134", "76135", "76137", "76140",
                   "76148", "76155", "76164", "76177", "76179", "76180", "76182",
                   "76244", "76247", "76248", "76262")),
    ## SEER by Age Group ------
    seer_grouped_age = list(
      year = c("1990", "1991", "1992", "1993", "1994", "1995",
               "1996", "1997", "1998", "1999", "2000", "2001", "2002",
               "2003", "2004", "2005", "2006", "2007", "2008", "2009",
               "2010", "2011", "2012", "2013", "2014", "2015", "2016",
               "2017", "2018", "2019", "2020", "2021", "2022", "2023"),
       sex = c("Male", "Female"),
       age.char = c("0","1-4", "5-9", "10-14", "15-19", "20-24", "25-29", "30-34",
                    "35-39", "40-44", "45-49", "50-54", "55-59", "60-64",
                    "65-69", "70-74", "75-79", "80-84", "85", NA),
       race = c("White", "Black", "American Indian/Alaskan Native", "Asian or Pacific Islander"),
       ethnicity = c("Non-Hispanic", "Hispanic")),
    ## SEER by single age  ----
       seer_single_age = list(
         year = c("1990", "1991", "1992", "1993", "1994", "1995",
                  "1996", "1997", "1998", "1999", "2000", "2001", "2002",
                  "2003", "2004", "2005", "2006", "2007", "2008", "2009",
                  "2010", "2011", "2012", "2013", "2014", "2015", "2016",
                  "2017", "2018", "2019", "2020", "2021", "2022", "2023"),
         sex = c("Male", "Female"),
         age.char = c("0","1", "2", "3", "4", "5", "6", "7", "8", "9", "10",
                      "11","12", "13", "14", "15", "16", "17", "18", "19", "20","21", "22",
                      "23", "24", "25", "26", "27", "28", "29",
                      "30", "31", "32", "33", "34", "35", "36", "37", "38",
                      "39", "40", "41", "42", "43", "44", "45", "46", "47",
                      "48", "49", "50", "51", "52", "53", "54", "55", "56",
                      "57", "58", "59", "60", "61", "62", "63", "64", "65",
                      "66", "67", "68", "69", "70", "71", "72", "73", "74",
                      "75", "76", "77", "78", "79", "80", "81", "82", "83",
                      "84", "85", "86", "87", "88", "89", "90"),
         race = c("White","Black", "American Indian/Alaskan Native", "Asian or Pacific Islander"),
         ethnicity = c("Non-Hispanic", "Hispanic")),
    ## Texas Demographic Center estimates ----
    tdc.estimates = list(
      year = c("2011", "2012", "2013", "2014", "2015", "2016",
               "2017", "2018", "2019", "2021", "2022"),
      sex = c("All", "Female", "Male"),
      age.char = c("0", "1", "2", "3", "4", "5", "6", "7",
                   "8", "9", "10", "11", "12", "13", "14", "15", "16", "17",
                   "18", "19", "20", "21", "22", "23", "24", "25", "26",
                   "27", "28", "29", "30", "31", "32", "33", "34", "35",
                   "36", "37", "38", "39", "40", "41", "42", "43", "44",
                   "45", "46", "47", "48", "49", "50", "51", "52", "53",
                   "54", "55", "56", "57", "58", "59", "60", "61", "62",
                   "63", "64", "65", "66", "67", "68", "69", "70", "71",
                   "72", "73", "74", "75", "76", "77", "78", "79", "80",
                   "81", "82", "83", "84", "85 +", "85", "86", "87", "88",
                   "89", "90", "91", "92", "93", "94", "95 +", "All"),
      race.eth = c("All",
                   "asian", "black", "hispanic", "other", "white")),
    ## Texas Demographic Center projections ----
    tdc.projections = list(
      year = c("2010", "2011", "2012", "2013", "2014", "2015",
               "2016", "2017", "2018", "2019", "2020", "2021", "2022",
               "2023", "2024", "2025", "2026", "2027", "2028", "2029",
               "2030", "2031", "2032", "2033", "2034", "2035", "2036",
               "2037", "2038", "2039", "2040", "2041", "2042", "2043",
               "2044", "2045", "2046", "2047", "2048", "2049", "2050"),
      sex = c("Female", "Male", "All"),
      age.char = c("All", "< 1", "1", "2", "3", "4", "5", "6",
                   "7", "8", "9", "10", "11", "12", "13", "14", "15", "16",
                   "17", "18", "19", "20", "21", "22", "23", "24", "25",
                   "26", "27", "28", "29", "30", "31", "32", "33", "34",
                   "35", "36", "37", "38", "39", "40", "41", "42", "43",
                   "44", "45", "46", "47", "48", "49", "50", "51", "52",
                   "53", "54", "55", "56", "57", "58", "59", "60", "61",
                   "62", "63", "64", "65", "66", "67", "68", "69", "70",
                   "71", "72", "73", "74", "75", "76", "77", "78", "79",
                   "80", "81", "82", "83", "84", "85", "86", "87", "88",
                   "89", "90", "91", "92", "93", "94", "95 +"),
      race.eth = c("asian","black", "hispanic", "other", "All", "white")))



# Canonical county names:
# Load county_fips vector with names of counties and values being FIPS codes. NOTE there is a subtle bug to be avoided
# here.  The TDC files list Texas as the first entry in area.name  The census and seer cubes list Texas in alphabetical
# order.The county names vector is TDC friendly.  The names must be sorted for the census and seer arrays .
load("data/county_fips.rda")
county_names <- trim_chr(names(county_fips))

# Save array_definitions to rda file ----
usethis::use_data(array_definitions)